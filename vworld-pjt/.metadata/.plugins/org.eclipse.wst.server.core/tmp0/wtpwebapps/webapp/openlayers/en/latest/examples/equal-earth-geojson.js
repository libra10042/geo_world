"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3756],{4503:function(e,t,o){var n=o(61268),r=o(41564),s=o(87240),c=o(49208),a=o(23986),u=o(76582),i=o(25231),f=o(71442),l=o(29810);function g(e,t=15){const o=Math.round(e[0]/t)*t,r=`EqualEarth${o}`;let s=(0,i.Jt)(r);return s||(n.A.defs(r,`+proj=eqearth +lon_0=${o} +x_0=0 +y_0=0 +R=6371008.7714 +units=m +no_defs +type=crs`),(0,u.kz)(n.A),s=(0,i.Jt)(r),s.setGlobal(!0),s.setExtent([-17243959.06,-8392927.6,17243959.06,8392927.6]),s.setWorldExtent([-180,-90,180,90])),s}const h=[11,0],m=g(h,1);(async()=>{const e=await fetch("https://openlayers.org/data/vector/ecoregions.json"),t=await e.json();function o(e,t){return new l.A({features:new c.A({featureProjection:t,featureClass:f.Ay}).readFeatures(e),overlaps:!1})}const n=new a.A({source:o(p(t,h[0]),m),extent:m.getExtent(),wrapX:!1,style:{"fill-color":["string",["get","COLOR"],"#eee"]}}),u=new r.A({layers:[n],target:"map",view:new s.Ay({projection:m,center:h,zoom:0,showFullExtent:!0})});function p(e,t){function o(e,t=10){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}const n=t-180,r=t+180,s={type:"FeatureCollection",features:[]};for(const t of e.features){const e="MultiPolygon"===t.geometry.type?2:1,[c,a]=t.geometry.coordinates.flat(e).reduce(((e,t)=>[Math.min(e[0],t[0]),Math.max(e[1],t[0])]),[Number.MAX_VALUE,Number.MIN_VALUE]),u=.01;if(c<n+u&&a>n-u||c<r+u&&a>r-u){const e=c<n?360:-360,a=structuredClone(t);"Polygon"===a.geometry.type&&(a.geometry.type="MultiPolygon",a.geometry.coordinates=[a.geometry.coordinates]);const i=[];for(const t of a.geometry.coordinates){const s=structuredClone(t),c=t.reduce(((e,t)=>e+t.length),0);let a=0;for(const e of t)for(const t of e){const e=t[0];t[0]=o(Math.min(Math.max(e,n),r)),t[0]!==o(e)&&a++}if(a<c&&i.push(t),a){let t=!1;for(const o of s)for(const s of o){const o=s[0]+e;s[0]=Math.min(Math.max(o,n+u),r-u),Math.abs(s[0])-180<1e-8&&(t=!0)}t||i.push(s)}}a.geometry.coordinates=i,s.features.push(a)}else s.features.push(t)}return s}u.getView().on("change:center",(function e(){const r=u.getView(),c=(0,i.WP)(r.getCenter(),r.getProjection()),a=g(c,5);if(r.getProjection().getCode()!==a.getCode()){r.un("change:center",e);const f=5*Math.round(c[0]/5),l=p(t,f);n.setSource(o(l,a)),u.setView(new s.Ay({projection:a,center:(0,i.Rb)(c,a),zoom:r.getZoom(),rotation:r.getRotation(),showFullExtent:!0})),u.getView().on("change:center",e)}}));const y=new a.A({source:new l.A,map:u,style:{"stroke-color":"rgba(255, 255, 255, 0.7)","stroke-width":2}});let d;const w=function(e){const t=u.forEachFeatureAtPixel(e,(function(e){return e})),o=document.getElementById("info");o.innerHTML=t&&(t.get("ECO_NAME")||t.get("name"))||"&nbsp;",t!==d&&(d&&y.getSource().removeFeature(d),t&&y.getSource().addFeature(t),d=t)};u.on("pointermove",(function(e){e.dragging||w(e.pixel)})),u.on("click",(function(e){w(e.pixel)}))})()}},function(e){var t;t=4503,e(e.s=t)}]);
//# sourceMappingURL=equal-earth-geojson.js.map